SSL

SSL/TLS Certificates operations

Secure Socket Layer/Trasport Layer Security
Versions TLS 1.1 -- 2006
         TLS 1.2 -- 2008
 		 TLS 1.3 -- 2018

Why do we need SSL Certificates ?
  -- For Source Identity Verification weather the website is trusted or not?
  -- And Client/Server authentication to check the request is valid or not. 


How SSL Works?
  - CA authorities like GoDaddy, DigiCert and GlobalSign issues their public key to Browser verdors like Chrome, Morzilla Firefox
    All the CA certificates are stored in the browsers.
  - Then we need to install the certificate on the web-serverr
  - Once you enter the URL through your browser/client, the request goes to web-server. 
    After that they both athenticate and handshake with the certificate that is  place on the web-server which is issued by CA authorities. 
  - If the client/server authentication is successful then web-server forward the request to application server and get the responce from application.

1. Generate Key: openssl genrsa -des3 -out server.key 2048
2. Remove Password from server key.
   openssl rsa -in server.key -out server.key
3. Create CSR (Provide all details like URL name, State, Country.....)
   openssl req -out server.csr -key server.key -new -sha256
   -Then upload the CSR to Certificate authority
4. Generate certificate from CSR and server key.
openssl x509 -req -days 365 -in server.csr -signkey server.key -out server.crt

**certificate signing request (CSR)
**
SSL.conf
Server Name *:443
Key Path
Crt Path

Server Name *:80
<VirtualHost *:80>
 RewriteEngine On
 RewriteRule (.*) https://%{SERVER_NAME}/$1 [R,L]
 </VirtualHost>
 
*******************************************************************************************************************************
8) SSL
  echo | openssl s_client -showcerts -servername google.com -connect google.com:443 2>/dev/null | openssl x509 -inform pem -noout -text
  openssl version(To findout the version)
  openssl s_client -showcerts  	-connect google.com:443
 
 import the new cert into key store
 keytool -import -alias <unique-alias-name> -keystore server.keystore -trustcacerts -file <certificate-name>
 
 https://www.sslshopper.com/article-most-common-java-keytool-keystore-commands.html 
 
Java Keytool Commands for Creating and Importing
These commands allow you to generate a new Java Keytool keystore file, create a CSR, and import certificates. Any root or intermediate certificates will need to be imported before importing the primary certificate for your domain.

Generate a Java keystore and key pair
keytool -genkey -alias mydomain -keyalg RSA -keystore keystore.jks -keysize 2048

Generate a certificate signing request (CSR) for an existing Java keystore
keytool -certreq -alias mydomain -keystore keystore.jks -file mydomain.csr

Import a root or intermediate CA certificate to an existing Java keystore
keytool -import -trustcacerts -alias root -file Thawte.crt -keystore keystore.jks

Import a signed primary certificate to an existing Java keystore
keytool -import -trustcacerts -alias mydomain -file mydomain.crt -keystore keystore.jks

Generate a keystore and self-signed certificate (see How to Create a Self Signed Certificate using Java Keytoolfor more info)
keytool -genkey -keyalg RSA -alias selfsigned -keystore keystore.jks -storepass password -validity 360 -keysize 2048

Java Keytool Commands for Checking
If you need to check the information within a certificate, or Java keystore, use these commands.

Check a stand-alone certificate
keytool -printcert -v -file mydomain.crt

Check which certificates are in a Java keystore
keytool -list -v -keystore keystore.jks

Check a particular keystore entry using an alias
keytool -list -v -keystore keystore.jks -alias mydomain

Other Java Keytool Commands
Delete a certificate from a Java Keytool keystore
keytool -delete -alias mydomain -keystore keystore.jks

Change a Java keystore password
keytool -storepasswd -new new_storepass -keystore keystore.jks

Export a certificate from a keystore
keytool -export -alias mydomain -file mydomain.crt -keystore keystore.jks

List Trusted CA Certs
keytool -list -v -keystore $JAVA_HOME/jre/lib/security/cacerts

Import New CA into Trusted Certs
keytool -import -trustcacerts -file /path/to/ca/ca.pem -alias CA_ALIAS -keystore $JAVA_HOME/jre/lib/security/cacerts